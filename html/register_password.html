<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon_icon-removebg.png"/>
    <link rel="stylesheet" href="/styles/login.css">
    <title>DAM</title>
    <meta name="description" content="D.A.M과 함께 당신의 꿈을 이루세요"/>
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>

<body>
<div src="./shapelined-_JBKdviweXI-unsplash.jpg"
     style="position: absolute;width: 100%;background-image: url(/images/shapelined-_JBKdviweXI-unsplash.jpg);top: 0px;left: 0px;right: 0px;bottom: 0px;min-height: 570px;background-size: cover;background-position: center center;">
    <header>
        <div style="height: 90px"></div>
        <div style="margin: 0 auto; width: 465px; border-bottom-color: black;">
            <a href="./DAM.html" id="loginlogo">DAM</a>
            <!--D.A.M 은 미래를 향해 나아갑니다-->
        </div>
    </header>
    <main>

        <div style="position: absolute;width: 296px;margin-left: 50%;left: -148px;margin-top: 60px;">
            <div style="padding-bottom: 20px;position: absolute;top: -40px;margin-left: 50%;left: -117px">
            <span style="font-size: 20px;text-align: center;display: table; margin-left: auto; margin-right: auto; display: inline-block;">
                비밀번호를 입력하세요 <br>
                <span style="font-size: 15px;">8 ~ 12자 영문, 숫자, 특수문자 조합</span>
            </span>

            </div>

                <div class="box_login" style="background: rgba(255,255,255,0.60);position: absolute;top: 50px;">
                    <div class="inp_text" style="border: 1px;">
                        <label for="loginpw" class="screen_out">비밀번호</label>
                        <input type="password" id="loginpw" name="loginpw" placeholder="pw">  <!-- 전화번호 정규식 JS 추가 필요-->
                        <label for="loginpw_confirm" class="screen_out">비밀번호확인</label>
                        <input type="password" id="loginpw_confirm" name="loginpw_confrim" placeholder="pw확인">
                    </div>

                </div>
                <div style="position: absolute;width: 200px;top: 170px;">
                    <span style="opacity: 0%;color: rgb(34,144,0);background-color: rgba(0,0,0,0);"
                          id="pw_correct">
                        <strong>비밀번호가 일치합니다</strong>
                    </span>
                    <span style="opacity: 0%;color: rgb(255,0,0);position: absolute;background-color: rgba(0,0,0,0);left: 0px;"
                          id="pw_incorrect">
                        <strong>비밀번호가 일치하지않습니다</strong>
                    </span>
                </div>
                <div style="position: relative;top: 50px;">
                    <button  class="basicbtn"id="next_button"
                            style="position: absolute;top:90px;left: 50%;margin-left: -150px;width: 300px;height: 40px;margin-top: 60px;background-color: gray;">
                        다음
                    </button>
                </div>

        </div>
    </main>


    <script>
    let isPasswordConfirmed = false;

    function showPopup(url, name) {
        window.open(toString(url), toString(name), "width=800, height=500, left=100, top=50");
    }

    function isPassword(asValue) {
        return (/^.*(?=^.{8,15}$)(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/).test(asValue); // 형식에 맞는 경우 true 리턴
    }

    $('#next_button').on('click', function () {
        const value = $('#loginpw').val();
        if (isPasswordConfirmed && isPassword(value)) {
            event.preventDefault();
            location.replace('/html/register_phonenumber.html');
        }
        else{
            alert("비밀번호를 다시확인해주세요");
        }
    });

    $('#loginpw').on('change keyup paste', function () {
        const value = $('#loginpw').val();
        if (isPassword(value)) {
            $('#next_button').css('background-color', 'black');
        } else {
            $('#next_button').css('background-color', 'gray');
        }
        if (isPasswordConfirmed) {
            const value_confirm = $('#loginpw_confirm').val();
            setIsCorrect(value == value_confirm);
        }
    });

    $('#loginpw_confirm').on('change keyup paste', function () {
        const value = $('#loginpw').val();
        const value_confirm = $('#loginpw_confirm').val();
        setIsCorrect(value == value_confirm);
    });

    function setIsCorrect(isCorrect) {
        $('#pw_incorrect').css('opacity', isCorrect ? '0%' : '100%');  //isCrrect? 가 true면 앞 false면 뒤
        $('#pw_correct').css('opacity', isCorrect ? '100%' : '0%');
        isPasswordConfirmed = isCorrect;
    }
    </script>
</div>
</body>
</html>
